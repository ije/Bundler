import { assertEquals } from "https://deno.land/std@0.74.0/testing/asserts.ts";
import { imageLoaderÂ } from "./image.ts"

Deno.test("loader image test", async () => {
  assertEquals(await imageLoader().test("testdata/src/image.png"), true);
  assertEquals(await imageLoader().test("testdata/src/image.ts"), false);
});

Deno.test("loader image fn", async () => {
  const input = "image.png";
  const source = `data:image/png;base64,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
`;

  const { imports, exports } = await imageLoader().fn(input, source);

  assertEquals(imports, {});
  assertEquals(exports, {});

});
